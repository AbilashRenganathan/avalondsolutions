<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>CV Payment - AvalonDSolutions</title>
  <meta name="description" content="Pay and download your professional CV.">
  <meta name="keywords" content="CV, Resume, Payment, AvalonDSolutions">
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/css/main.css" rel="stylesheet">
  <style>
    .payment-section {
      background: var(--surface-color);
      border-radius: 12px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.06);
      padding: 2rem;
      margin-top: 2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .paypal-btn-container {
      margin-top: 2rem;
      margin-bottom: 2rem;
    }
    .cv-preview-section {
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.04);
      padding: 2rem;
      margin-top: 2rem;
    }
    .cv-preview {
      background: #fff;
      border-radius: 8px;
      padding: 2rem;
      box-shadow: 0 1px 8px rgba(0,0,0,0.04);
      min-height: 300px;
    }
    .btn-back {
      margin-bottom: 1rem;
    }
    .currency-badge {
      font-size: 1.1em;
      font-weight: 600;
      margin-left: 0.5em;
    }
  </style>
</head>
<body>
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid position-relative d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <img src="assets/img/avalon-d-solutions.png" alt="">.</span>
      </a>
      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html#hero">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#portfolio">Portfolio</a></li>
          <li><a href="index.html#pricing">Pricing</a></li>
          <li><a href="index.html#team">Team</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
      <a class="btn-getstarted" href="index.html#about">Get Started</a>
    </div>
  </header>
  <main class="main">
    <div class="page-title" data-aos="fade">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1>CV Payment</h1>
              <p class="mb-0">Complete your payment to download your professional CV.</p>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li><a href="services-details.html">Services Details</a></li>
            <li class="current">CV Payment</li>
          </ol>
        </div>
      </nav>
    </div>
    <div class="container">
      <section class="payment-section" data-aos="fade-up">
        <h2 class="mb-4">Select Region & Pay</h2>
        <div class="mb-3">
          <label for="regionCurrency" class="form-label">Select your region/currency</label>
          <select class="form-select" id="regionCurrency">
            <option value="USD">United States (USD $5)</option>
            <option value="GBP">United Kingdom (GBP £4)</option>
            <option value="EUR">Europe (EUR €4.5)</option>
            <option value="AUD">Australia (AUD $7)</option>
          </select>
          <span class="currency-badge" id="currencyBadge"></span>
        </div>
        <div class="paypal-btn-container" id="paypal-button-container"></div>
        <div id="payment-success" style="display:none;">
          <div class="alert alert-success">Payment successful! You can now download your CV.</div>
          <button id="downloadBtn" class="btn btn-success mt-3"><i class="bi bi-download"></i> Download CV as PDF</button>
        </div>
      </section>
      <section class="cv-preview-section" data-aos="fade-up" data-aos-delay="100">
        <h2 class="mb-4">CV Preview</h2>
        <div class="cv-preview" id="cvPreview"></div>
      </section>
    </div>
  </main>
  <footer id="footer" class="footer position-relative light-background">
    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-5 col-md-12 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <img src="assets/img/avalon-d-solutions.png" alt="">
          </a>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-6 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Terms of service</a></li>
            <li><a href="#">Privacy policy</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-6 footer-links">
          <h4>Our Services</h4>
          <ul>
            <li><a href="#">Employment Advisory Services</a></li>
            <li><a href="#">CV Support</a></li>
            <li><a href="#">Career Development Services</a></li>
            <li><a href="#">Business Advisory</a></li>
            <li><a href="#">Business Legal Advice</a></li>
            <li><a href="#">IT Support</a></li> 
          </ul>
        </div>
        <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
          <h4>Contact Us</h4>
          <p>144 Broadway Gardens,<br>Mitcham<br><br><strong>Phone:</strong> +44 73 771 106 03<br><strong>Email:</strong> info@avalondsolutions.com<br></p>
        </div>
      </div>
    </div>
    <div class="container copyright text-center mt-4">
      <p>&copy; <span>2025</span> <span class="sitename">AvalonDSolutions</span>. All Rights Reserved</p>
    </div>
  </footer>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
  <script>
    // Animate on scroll
    AOS.init();
    // Load CV preview from localStorage
    const cvHtml = localStorage.getItem('cvHtml') || '';
    const cvClass = localStorage.getItem('cvClass') || '';
    document.getElementById('cvPreview').className = cvClass;
    document.getElementById('cvPreview').innerHTML = cvHtml;
    // Set region/currency from previous selection
    const regionMap = {
      'uk': 'GBP',
      'australia': 'AUD',
      'europe': 'EUR',
      'usd': 'USD'
    };
    let region = localStorage.getItem('cvRegion') || 'uk';
    let currency = regionMap[region] || 'USD';
    document.getElementById('regionCurrency').value = currency;
    // Update PayPal script currency dynamically
    function loadPayPal(currency) {
      // Remove old button
      document.getElementById('paypal-button-container').innerHTML = '';
      // Remove old PayPal script if any
      const oldScript = document.querySelector('script[src*="paypal.com/sdk/js"]');
      if (oldScript) oldScript.remove();
      // Add new script
      const script = document.createElement('script');
      script.src = `https://www.paypal.com/sdk/js?client-id=sb&currency=${currency}`;
      script.onload = renderPayPal;
      document.body.appendChild(script);
    }
    // Render PayPal button
    function renderPayPal() {
      let amount = 5;
      if (currency === 'GBP') amount = 4;
      if (currency === 'EUR') amount = 4.5;
      if (currency === 'AUD') amount = 7;
      paypal.Buttons({
        createOrder: function(data, actions) {
          return actions.order.create({
            purchase_units: [{
              amount: { value: amount.toString(), currency_code: currency }
            }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            document.getElementById('payment-success').style.display = 'block';
            document.getElementById('paypal-button-container').style.display = 'none';
            document.getElementById('regionCurrency').disabled = true;
          });
        }
      }).render('#paypal-button-container');
    }
    // Initial load
    renderPayPal();
    // Update currency badge
    function updateBadge() {
      const val = document.getElementById('regionCurrency').value;
      let badge = '';
      if (val === 'USD') badge = '$5 USD';
      if (val === 'GBP') badge = '£4 GBP';
      if (val === 'EUR') badge = '€4.5 EUR';
      if (val === 'AUD') badge = '$7 AUD';
      document.getElementById('currencyBadge').textContent = badge;
    }
    updateBadge();
    // On region change
    document.getElementById('regionCurrency').addEventListener('change', function() {
      currency = this.value;
      updateBadge();
      loadPayPal(currency);
    });
    // Download after payment
    document.getElementById('downloadBtn').addEventListener('click', function() {
      const element = document.getElementById('cvPreview');
      const opt = {
        margin:       0.3,
        filename:     'CV.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    });
  </script>
</body>
</html> 